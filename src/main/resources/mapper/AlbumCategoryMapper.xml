<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="edu.njnu.eamsbe.mapper.AlbumCategoryMapper">
    <insert id="insertAlbumCategory">
        INSERT INTO album_categories
        VALUES (#{categoryId},
                #{categoryPath},
                #{categoryName},
                #{categoryCreateDate})

    </insert>
    <delete id="deleteAlbumCategoryById">
        #删除相册分类和对应的相册和相册里的照片
        delete
        from photos
        where album_id
                  in (select album_id from albums where category_id = #{categoryId});
        delete
        from albums
        where category_id = #{categoryId};
        delete
        from album_categories
        where category_id = #{categoryId};
    </delete>


    <select id="findAllAlbumCategory" resultType="edu.njnu.eamsbe.pojo.entity.AlbumCategory">
        SELECT category_id           as categoryId,
               category_path         as categoryPath,
               category_name         as categoryName,
               category_created_date as categoryCreateDate
        FROM album_categories
    </select>
</mapper>